---
title: "/include/dr_api.h File Reference"
layout: default
permalink: /dr__api_8h.html
---
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DynamoRIO
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_1036706e55c22cab35bc1c58ee689f1d.html">runner</a></li><li class="navelem"><a class="el" href="dir_629f8151d55d307162ff2d619fb1783d.html">work</a></li><li class="navelem"><a class="el" href="dir_84b917e355554dd3f3793c21ab4ddcaf.html">dynamorio</a></li><li class="navelem"><a class="el" href="dir_afee7b8fe0b60d0be677a736c14882ae.html">dynamorio</a></li><li class="navelem"><a class="el" href="dir_48474711f0a4ba29d8b16b7ca2362db9.html">build_release-32</a></li><li class="navelem"><a class="el" href="dir_e77cb64d414c273b7d0ccb7a22f80058.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dr_api.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Top-level include file for DynamoRIO API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="dr__defines_8h.html">dr_defines.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__events_8h.html">dr_events.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__app_8h.html">dr_app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__ir__opnd_8h.html">dr_ir_opnd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__modules_8h.html">dr_modules.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__os__utils_8h.html">dr_os_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__tools_8h.html">dr_tools.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__proc_8h.html">dr_proc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__ir__encode_8h.html">dr_ir_encode.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__ir__instr_8h.html">dr_ir_instr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__ir__instr__inline_8h.html">dr_ir_instr_inline.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__ir__decode_8h.html">dr_ir_decode.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__ir__disassemble_8h.html">dr_ir_disassemble.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__ir__utils_8h.html">dr_ir_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__ir__instrlist_8h.html">dr_ir_instrlist.h</a>&quot;</code><br />
<code>#include &quot;dr_ir_opcodes.h&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__ir__macros_8h.html">dr_ir_macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__tracedump_8h.html">dr_tracedump.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dr__annotation_8h.html">dr_annotation.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a70e64a4a868677325cf3b1f7e3ca0938"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__api_8h.html#a70e64a4a868677325cf3b1f7e3ca0938">DR_DISALLOW_UNSAFE_STATIC</a>&#160;&#160;&#160;DR_EXPORT LINK_ONCE int _DR_DISALLOW_UNSAFE_STATIC_ = 1;</td></tr>
<tr class="separator:a70e64a4a868677325cf3b1f7e3ca0938"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2b938c98dd186cc94eef6880f9e3c3e9"><td class="memItemLeft" align="right" valign="top">DR_EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__api_8h.html#a2b938c98dd186cc94eef6880f9e3c3e9">dr_client_main</a> (<a class="el" href="dr__defines_8h.html#a68540a70b4f8150a4fe6dcec91bf8825">client_id_t</a> id, int argc, const char *argv[])</td></tr>
<tr class="separator:a2b938c98dd186cc94eef6880f9e3c3e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a819eb581527829240bf227d5a8f98e4c"><td class="memItemLeft" align="right" valign="top">DR_EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__api_8h.html#a819eb581527829240bf227d5a8f98e4c">dr_init</a> (<a class="el" href="dr__defines_8h.html#a68540a70b4f8150a4fe6dcec91bf8825">client_id_t</a> id)</td></tr>
<tr class="separator:a819eb581527829240bf227d5a8f98e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Top-level include file for DynamoRIO API. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a70e64a4a868677325cf3b1f7e3ca0938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70e64a4a868677325cf3b1f7e3ca0938">&#9670;&nbsp;</a></span>DR_DISALLOW_UNSAFE_STATIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DR_DISALLOW_UNSAFE_STATIC&#160;&#160;&#160;DR_EXPORT LINK_ONCE int _DR_DISALLOW_UNSAFE_STATIC_ = 1;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This declaration requests that DR perform sanity checks to ensure that client libraries will also operate safely when linked statically into an application. These checks include ensuring that the system allocator is not called outside of process initialization or exit, where such calls raise transparency issues due to the lack of isolation without a private loader. Currently, these checks are only performed in debug builds on UNIX. This can be overridden in client code by calling <a class="el" href="dr__events_8h.html#a2bab7837ca93d577e4563e470601d371">dr_allow_unsafe_static_behavior()</a>. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2b938c98dd186cc94eef6880f9e3c3e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b938c98dd186cc94eef6880f9e3c3e9">&#9670;&nbsp;</a></span>dr_client_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT void dr_client_main </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dr__defines_8h.html#a68540a70b4f8150a4fe6dcec91bf8825">client_id_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When registering a process, users must provide a list of paths to client libraries and their associated client-specific options. DR looks up "dr_client_main" in each client library and calls that function when the process starts. Clients can register to receive callbacks for the various events within <a class="el" href="dr__api_8h.html#a2b938c98dd186cc94eef6880f9e3c3e9">dr_client_main()</a>. Note that client paths and options cannot include semicolons.</p>
<p><code>client_id</code> is the ID supplied at registration and is used to identify the client for <a class="el" href="dr__tools_8h.html#a5f53df83b2108925fa52bd607536e25d">dr_get_option_array()</a>, <a class="el" href="dr__tools_8h.html#afccb9210ada84de4fbbaa8d851952a37">dr_get_client_path()</a>, and external nudges.</p>
<p>The arguments passed to the client are specified in <code>argc</code> and <code>argv</code>. To match standalone application conventions, <code>argv</code>[0] is set to the client library path, with the actual parameters starting at index 1. </p>

</div>
</div>
<a id="a819eb581527829240bf227d5a8f98e4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a819eb581527829240bf227d5a8f98e4c">&#9670;&nbsp;</a></span>dr_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT void dr_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dr__defines_8h.html#a68540a70b4f8150a4fe6dcec91bf8825">client_id_t</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Legacy, deprecated initialization routine. </p><dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd></dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  DynamoRIO version 9.0.1 --- Mon Feb 14 2022 19:04:12 &nbsp; <img border=0 src="favicon.png">
</small></address>
